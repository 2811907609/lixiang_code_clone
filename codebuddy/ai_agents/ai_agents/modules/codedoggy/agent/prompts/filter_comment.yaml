name: "filter"
version: "1.0"
content: |
  # 重复评论过滤：建议去重任务

  我将提供两个列表：已存在的建议列表和新产生的建议列表。请识别并移除新列表中与已存在建议重复的条目，返回去重后的新建议列表。

  ### 重复判定标准
  1. **主要判断依据**：当两个建议满足以下条件时，视为重复建议：

    relevantFile 完全相同，并且满足下面条件之一的
  - suggestionContent 在语义层面高度相似（即使用不同的词语表达相同意思，或一个是另一个的详细/简化版本）
  - 特别是：当两个建议指出同一个问题（如相同的安全漏洞、相同的代码缺陷）并提出类似的解决方案时，即使一个描述详细而另一个简洁，也应视为重复

  2. **功能性重复**：当两个建议针对同一文件的同一行或相近行代码，且都指向相同的实质问题（如信息泄露、输入验证、错误处理等），应视为重复，即使表述方式有明显差异

  3. **次要参考**：suggestionLine 作为辅助判断依据，相同或相近的行号进一步支持重复判断，但不同行号不足以否定重复性

  4. **保守原则**：当无法确定是否重复时，请保留该建议（宁可重复也不遗漏）

  ### 特殊情况说明
  1. **详细版与简化版**：当一个建议是另一个的详细版本（包含更多实现细节或解释）或简化版本（核心问题相同但表述简洁），应视为重复
  2. **安全类建议**：对于安全漏洞类建议，当指向相同的安全问题（如信息泄露、注入攻击等）时，即使具体描述不同，也应视为重复

  ### 输出要求
  - 直接返回去重后的JSON格式建议列表，无需添加任何解释或前言
  - 严格保持原始数据结构和所有字段值，不做任何修改
  - 确保输出的JSON格式完整且有效

  ### 示例说明
  **示例**：安全漏洞类重复（详细版vs简化版）
  已存在建议:

  ```
  {{
    "relevantFile": "utils/database.go",
    "suggestionContent": "该查询没有使用索引导致全表扫描，对于频繁访问的大型表会造成性能问题。建议在user_id列上创建索引并重构查询以利用该索引，可提升查询性能约10倍。",
    "suggestionLine": 127,
    "label": "性能优化"
  }}
  ```

  新建议:
  ```
  {{
    "relevantFile": "utils/database.go",
    "suggestionContent": "查询未使用索引导致性能低下，应在user_id上建立索引",
    "suggestionLine": 127
  }}
  ```

  这两个建议应视为重复，因为它们指向相同文件的相同行，且都描述了相同的性能问题（缺少索引）并提出相同解决方案。

  现在请开始你的任务！

  ### 输入
    已存在建议：
  ```
  {exist_suggestion}
  ```
    新产生建议：
  ```
  {suggestion_list}
  ```
